import * as Thunk from 'ephox/katamari/api/Thunk';
import fc from 'fast-check';
import { UnitTest, Assert } from '@ephox/bedrock-client';
UnitTest.test('ThunkTest', function () {
    var testSanity = function () {
        var args = null;
        var f = Thunk.cached(function () {
            args = Array.prototype.slice.call(arguments);
            return args;
        });
        var r1 = f('a');
        Assert.eq('eq', ['a'], args);
        Assert.eq('eq', ['a'], r1);
        var r2 = f('b');
        Assert.eq('eq', ['a'], args);
        Assert.eq('eq', ['a'], r2);
    };
});
UnitTest.test('Thunk.cached counter', function () {
    fc.assert(fc.property(fc.json(), fc.func(fc.json()), fc.json(), function (a, f, b) {
        var counter = 0;
        var thunk = Thunk.cached(function (x) {
            counter++;
            return {
                counter: counter,
                output: f(x)
            };
        });
        var value = thunk(a);
        var other = thunk(b);
        Assert.eq('eq', value, other);
    }));
});
//# sourceMappingURL=ThunkTest.js.map