import { Step } from './Step';
import { Arr } from '@ephox/katamari';
export var compose = function (sab, sbc) {
    // don't Pipe them - assume that the base actions have already been piped
    return ({
        runStep: function (a, next, die, logs) {
            return sab.runStep(a, function (b, blogs) { return sbc.runStep(b, next, die, blogs); }, die, logs);
        }
    });
};
/*
Code partly generated in GHCi:

:m + Data.List
:m + Control.Monad
putStrLn $ intercalate " |\n" $ (\n -> (\x -> "[" ++ x ++ ", Step<A" ++ (show n) ++ ", T>]") $ intercalate ", " $ (\m -> "Step<A" ++ (show m) ++ ", A" ++ (show (m + 1)) ++ ">") <$> [1..n-1]) <$> [1..100]
 */
export var sequence = function (steps) {
    var s = steps;
    return sequenceUnsafe(s);
};
export var sequenceSame = function (steps) {
    return sequenceUnsafe(steps);
};
export var sequenceUnsafe = function (steps) {
    return steps.length === 0 ? Step.pass : Arr.foldl(steps, function (acc, step) { return compose(acc, step); }, Step.pass);
};
//# sourceMappingURL=StepSequence.js.map