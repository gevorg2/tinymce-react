"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const cli = require("./Cli");
const ClOptions = require("./ClOptions");
const ExitCodes_1 = require("../util/ExitCodes");
const commonOptions = (directories) => {
    return [
        ClOptions.projectdir(directories.current),
        ClOptions.basedir(directories.bin),
        ClOptions.overallTimeout,
        ClOptions.singleTimeout,
        ClOptions.chunk,
        ClOptions.help,
        ClOptions.logging,
        ClOptions.version,
        ClOptions.bundler
    ];
};
exports.forAuto = (directories, argv = process.argv) => {
    return cli.extract('bedrock-auto', 'Use a Webdriver to launch a browser and run tests against it', commonOptions(directories).concat([
        ClOptions.browser,
        ClOptions.config,
        ClOptions.files,
        ClOptions.testdir,
        ClOptions.testdirs,
        ClOptions.name,
        ClOptions.output,
        ClOptions.debuggingPort,
        ClOptions.customRoutes,
        ClOptions.stopOnFailure,
        ClOptions.retries,
        ClOptions.delayExiting,
        ClOptions.useSandboxForHeadless,
        ClOptions.skipResetMousePosition,
        ClOptions.coverage,
        ClOptions.wipeBrowserCache
    ]), argv);
};
exports.forManual = (directories, argv = process.argv) => {
    return cli.extract('bedrock', 'Launch a testing process on a localhost port and allow the user to navigate to it in any browser', commonOptions(directories).concat([
        ClOptions.stopOnFailure__hidden,
        ClOptions.config,
        ClOptions.files,
        ClOptions.testdir,
        ClOptions.testdirs,
        ClOptions.customRoutes,
        ClOptions.coverage
    ]), argv);
};
exports.forFramework = (directories, argv = process.argv) => {
    return cli.extract('bedrock-framework', 'Load bedrock against a specific page using a framework', commonOptions(directories).concat([
        ClOptions.stopOnFailure,
        ClOptions.name,
        ClOptions.page,
        ClOptions.browser,
        ClOptions.output,
        ClOptions.framework,
        ClOptions.debuggingPort
    ]), argv);
};
exports.logAndExit = (errs) => {
    console.error('\n****\nError while processing command line for ' + errs.command);
    const messages = errs.errors.join('\n');
    console.error(messages);
    console.error('Use ' + errs.command + ' --help to print usage\n****\n');
    process.exit(ExitCodes_1.ExitCodes.failures.cli);
};
//# sourceMappingURL=Clis.js.map