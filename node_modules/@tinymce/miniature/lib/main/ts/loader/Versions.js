import { GeneralSteps, Step } from '@ephox/agar';
import { load, loadFrom, unload } from './Loader';
import { readAllPlugins, registerPlugins } from './Plugins';
var sUnload = Step.sync(unload);
var sLoad = function (version) {
    return GeneralSteps.sequence([
        sUnload,
        Step.async(function (next, die) {
            load(version, next, die);
        })
    ]);
};
var sLoadFrom = function (customUrl, baseUrl) {
    return GeneralSteps.sequence([
        sUnload,
        Step.async(function (next, die) {
            loadFrom(customUrl, baseUrl, next, die);
        })
    ]);
};
var sRegisterPlugins = function (plugins) { return Step.sync(function () { return registerPlugins(plugins); }); };
var sWithVersion = function (version, step) {
    var plugins = readAllPlugins();
    return GeneralSteps.sequence([
        sLoad(version),
        step,
        sLoad('latest'),
        sRegisterPlugins(plugins)
    ]);
};
export { sWithVersion, sLoad, sLoadFrom, sUnload };
//# sourceMappingURL=Versions.js.map